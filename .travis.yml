# TODO: add rst linting
language: python
dist: xenial
branches:
  only:
  - master
  - stable
matrix:
  include:
    - python: '3.7'
      env:
        - TRAVIS_TEST_NAME="Lint_only"
      install:
        - 'pip install .'
        - 'pip install pylama'
        - 'pip install eradicate'
        - 'pip install python-restructuredtext-lint'
      script: 
        - pylama -i E501 src
        - pylama -i E501 tests
        - pylama -i E501 example_app
        - rst-lint *.rst
    - python: '3.6'
      env:
       - TRAVIS_TEST_NAME="Py36_nocodecov"
      install:
        - 'pip install .'
        - 'pip install -r requirements-ci.txt'        
      script: pytest
    - python: '3.7'
      env:
       - TRAVIS_TEST_NAME="Py37_codecov"
      install:
        - 'pip install .'
        - 'pip install -r requirements-ci.txt'       
      script: pytest
      after_success:
        - bash <(curl -s https://codecov.io/bash)